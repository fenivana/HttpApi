<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<script type="module">
import Teleman from '../dist/Teleman.mjs'

(async function() {
  const api = new Teleman()
  api.use(async(ctx, next) => {
    try {
      return await next()
    } catch (e) {
      if (ctx.response) {
        throw { status: ctx.response.status, message: e }
      } else {
        throw e
      }
    }
  })
  const data = await api.get('test.json', { q1: 123 })
  console.log(data)

  try {
    await api.get('404')
  } catch (e) {
    console.error(e)
  }

  try {
    await api.get('invalid://url')
  } catch (e) {
    console.error(e)
  }
}())
</script>
</body>
</html>